function push_pull(t){"pull"==t?$("#crm-app > div.container-fluid").stop(!0).animate({"margin-left":"58px",width:$(window).width()-58},300,"easeOutQuad",function(){$("#crm-app > div.container-fluid, #crm-app > div.container-fluid > div.row").removeAttr("style")}):($("#crm-app > div.container-fluid > div.row").width($(window).width()-58),$("#crm-app > div.container-fluid").css("overflow-x","scroll").stop(!0).animate({"margin-left":"260px",width:$(window).width()-260},200,"easeOutQuad"))}function add_filter(t){var e=t.find(".search-keyword").text().trim(),a=t.attr("data-type"),i=t.attr("data-key"),o="",d="";""!=e&&("filter"==a||"group-by"==a?(i=i.replace("\\","&#x"),d=' class = "fa-icon"',o=filter_list.find('div[data-type="'+a+'"]')):o=filter_list.find('div[data-type="'+a+'"][data-key="'+i+'"]'),o.length?$('<span data-separator="or">'+e+"</span>").insertBefore(o.find("i.fa")):filter_list.append('<div data-type="'+a+'" data-key="'+i+'"'+d+"><span>"+e+'</span><i class="fa fa-times-circle" aria-hidden="true"></i></div>'),top_search.find('form input[type="text"]').val(""),suggestions.find('[data-type="search"] .search-keyword').text(""))}function get_search_options(t,e){var a='<li data-type="'+t+'" data-key="'+e+'" class="ts-option"><span class="search-keyword">Administrator</span></li>';return a+='<li data-type="'+t+'" data-key="'+e+'" class="ts-option"><span class="search-keyword">User 1</span></li>',a+='<li data-type="'+t+'" data-key="'+e+'" class="ts-option"><span class="search-keyword">User 2</span></li>'}function notification(t,e){$.notify(t,{style:"crm",className:e})}function noti_mark_read(t){t.originalEvent?eles=$("div.notifications ul.dropdown-menu-right li.unread"):eles=t.closest("li.unread"),$.each(eles,function(){var t=$(this);t.find('ul.noti-options a[data-action="mark-read"]').parent().addClass("disabled"),t.animate({backgroundColor:"#fff"},100,function(){$(this).removeClass("unread").removeAttr("style")})})}function counter(t,e,a,i){"string"==typeof t&&(t=$(t)),$.each(t,function(){var t=$(this),o=0,d=parseFloat(t.find(i).text().replace(",","")),n=0;t.find(e).length&&($.each(t.find(e),function(){""!=$(this).find(a).text()&&(o+=parseFloat($(this).find(a).text().replace(",","")))}),n=o),d!=n&&count($(this).find(i),d,n)})}function count(t,e,a){$({countNum:parseFloat(e)}).animate({countNum:parseFloat(a)},{duration:1e3,easing:"linear",step:function(){t.text(Math.floor(this.countNum))},complete:function(){var e=this.countNum.toString().split(".");e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),this.countNum=e.join("."),t.text(this.countNum)}})}function set_height(t,e){t.css("height",""),e.css("height",""),t.height()>e.height()?e.height(t.height()):t.height(e.height()),resize_set_height.hasOwnProperty(t.selector)||($(window).resize(function(){set_height(t,e)}),resize_set_height[t.selector]=!0)}function init_modal(){id="crm_modal-"+($('div.modal[role="dialog"]').length+1);var t='<div class="modal fade" id="'+id+'" tabindex="-1" role="dialog" aria-labelledby="">';return t+='<div class="modal-dialog modal-sm" role="document">',t+='<div class="modal-content"><div class="modal-header">',t+='<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title"></h4></div>',t+='<div class="modal-body"></div><div class="modal-footer">',t+='<button type="button" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" class="btn btn-default btn-primary">Save</button>',t+="</div></div></div></div>",$("body > div").append(t),modal=$("#"+id),modal.on("show.bs.modal",function(t){var e=1040+10*$(".modal:visible").length;$(this).css("z-index",e),setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",e-5).addClass("modal-stack")},0)}),modal.on("hidden.bs.modal",function(t){$(".modal:visible").length&&$(document.body).addClass("modal-open");var e=$(this);e.removeClass().addClass("modal fade"),e.find("*").removeClass("hide"),e.find("div.modal-header div.dropdown.pull-right").remove(),e.find("div.modal-dialog").removeClass("modal-lg").addClass("modal-sm"),e.attr("aria-labelledby",""),e.find("h4.modal-title, div.modal-body").text(""),e.find("button.btn-default.btn-primary").text("Save"),window.new_modal&&(window[window.new_modal[0]](window.new_modal[1]),window.new_modal=void 0)}),modal}function show_modal(t,e){t.addClass(e["class"]),t.attr("aria-labelledby",e.title),e.hasOwnProperty("extra")&&-1!=e.extra.indexOf("no-title")?t.find("h4.modal-title").addClass("hide"):t.find("h4.modal-title").text(e.title),e.hasOwnProperty("extra")&&-1!=e.extra.indexOf("header-dropdown")&&(t.find("div.modal-header button").addClass("hide"),0==t.find("div.modal-header div.dropdown").length&&t.find("div.modal-header").append('<div class="dropdown pull-right"><span id="event-popup-close" class="och-options" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></span><div class="dd-options" aria-labelledby="event-popup-close"><span>Select Option</span><ul class="options-list"><li data-action="edit">Edit</li><li data-action="delete">Delete</li><li data-action="close" data-dismiss="modal">Close</li></ul></div></div>')),t.find("div.modal-body").html(e.body),e.hasOwnProperty("size")&&""!=e.size&&"large"==e.size&&t.find("div.modal-dialog").removeClass("modal-sm").addClass("modal-lg"),e.hasOwnProperty("extra")&&-1!=e.extra.indexOf("no-footer-buttons")&&t.find("div.modal-footer button").addClass("hide"),e.hasOwnProperty("button")&&""!=e.button&&t.find("button.btn-default.btn-primary").text(e.button).addClass(e.button.replace(" ","-").toLowerCase()),e.hasOwnProperty("extra")&&-1!=e.extra.indexOf("footer-color-border")&&t.find("div.modal-footer").addClass("border-primary"),e.hasOwnProperty("buttons")&&$.each(e.buttons,function(e,a){t.find("button.btn-primary."+a.replace(" ","-").toLowerCase()).length||$('<button type="button" class="btn btn-primary '+a.replace(" ","-").toLowerCase()+'">'+a+"</button>").insertBefore(t.find("button.btn-primary"))}),t.modal("show")}function close_modal(t){t=void 0==t?crm_modal:t,t.modal("hide")}function create_autocomplete_li(t,e){var a="";$.each(t,function(t,e){e=-1==["",null].indexOf(e)?e:"",a+="name"!=t?" data-"+t+'="'+e+'"':""}),$("<li"+a+">"+t.name+"</li>").insertBefore(e.find('li[data-action="create"]'))}function dropdown_autocomplete(t,e,a){a=a||10;var i=t.find("ul.options-list");i.append('<li data-action="create"><em>Create</em></li>'),i.append('<li data-action="create-edit"><em>Create and Edit</em></li>'),$.each(e,function(t){return create_autocomplete_li(this,i),t+1==a?!1:void 0}),t.find("input.form-control").keyup(function(){$(this).closest("dropdown").hasClass("open")||$(this).closest("dropdown").addClass("open");var t=$(this),e=t.val().trim();i.find('li:not([data-action="create"], [data-action="create-edit"])').hide(),""!=e?(i.find('li:contains("'+e+'")').removeAttr("style"),i.find('li[data-action="create"] em').text('Create "'+e+'"'),i.find('li[data-action="create-edit"] em').text('Create and Edit "'+e+'"')):(i.find('li:not([data-action="create"], [data-action="create-edit"])').removeAttr("style"),i.find('li[data-action="create"] em').text("Create"),i.find('li[data-action="create-edit"] em').text("Create and Edit"))})}function check_task_grp(t){void 0==t?($.each($("div.mail-messages ul.timelines li"),function(){$(this).find("div.media:visible").length||$(this).fadeOut(100)}),clearTimeout(chk_tsk_grp)):"all"==task_opt?$("div.mail-messages ul.timelines li").removeAttr("style"):$.each($("div.mail-messages ul.timelines li:not(:visible)"),function(){$(this).find("div.media:visible").length||("complited"==task_opt&&$(this).find("div.media.done").length?$(this).show():"incomplited"==task_opt&&$(this).find("div.media.undone").length&&$(this).show())})}String.prototype.replaceAll=function(t,e){var a=this;return a.replace(new RegExp(t,"g"),e)},$.expr[":"].contains=$.expr.createPseudo(function(t){return function(e){return $(e).text().toUpperCase().indexOf(t.toUpperCase())>=0}}),$(document).on("click",'a[href="#"]',function(t){return!1}),$(document).on("click",'li[class*="selection"] .dropdown-menu',function(t){t.stopPropagation()}),$(document).on("click",'li[class*="selection"] .dropdown-menu li',function(){var t=$(this),e=t.closest('li[class*="selection"]');t.hasClass("selected")?t.removeClass("selected"):(e.hasClass("selection__single")&&e.find("li").removeClass("selected"),t.addClass("selected"))});var main_nav=$("#main-nav ul.navbar-nav");$(document).on("mouseenter","#main-nav:not(.no-expand)",function(){main_nav.stop(!0).addClass("active").find('a[data-toggle="tooltip"]').tooltip("destroy"),$(document).width()>768&&push_pull("push")}),$(document).on("mouseleave","#main-nav:not(.no-expand)",function(){main_nav.stop(!0).removeClass("active").find('a[data-toggle="tooltip"]').tooltip(),$(document).width()>768&&push_pull("pull")}),$(document).on("click","#main-nav button.navbar-toggle",function(){main_nav.hasClass("active")?(main_nav.removeClass("active"),main_nav.find('a[data-toggle="tooltip"]').tooltip()):(main_nav.addClass("active"),main_nav.find('a[data-toggle="tooltip"]').tooltip("destroy"))});var top_search=$("header.crm-header div.top-search"),filter_list=$("header.crm-header div.filter-list"),suggestions=$("header.crm-header div.top-search__suggestions");$(document).on("click","header.crm-header div.fa-search.visible-xs-block",function(t){$(document).width()<=767&&top_search.removeClass("open").fadeToggle()}),$(document).on("click","div.top-search__suggestions li[data-type]",function(){add_filter($(this))}),top_search.find('form input[type="text"]').keydown(function(t){var e=t.keyCode||t.charCode||t.which;return 13==e?!1:void 0}),top_search.find('form input[type="text"]').keyup(function(t){var e=t.keyCode||t.charCode||t.which,a=$("div.top-search__suggestions li[data-type].focused");if(13==e)add_filter(a);else if(38==e)a.is($("div.top-search__suggestions li[data-type]:first"))?(a.removeClass("focused"),$("div.top-search__suggestions li[data-type]:last").addClass("focused")):a.removeClass("focused").prev().addClass("focused");else if(40==e)a.is($("div.top-search__suggestions li[data-type]:last"))?(a.removeClass("focused"),$("div.top-search__suggestions li[data-type]:first").addClass("focused")):a.removeClass("focused").next().addClass("focused");else{top_search.hasClass("open")||$("div.top-search div.dropdown-menu").dropdown("toggle");var i=$(this).val().trim();suggestions.find("strong").text(i)}});var last_focused=null;top_search.on("shown.bs.dropdown",function(){$("div.top-search__suggestions li[data-type]").removeClass("focused").find(":first-child").addClass("focused")}),suggestions.mouseenter(function(){$("div.top-search__suggestions li[data-type].focused").removeClass("focused")}),suggestions.find("li").mouseleave(function(){last_focused=$(this)}),suggestions.mouseleave(function(){last_focused&&last_focused.addClass("focused")}),$(document).on("click","div.top-search div.top-search__suggestions li i.fa",function(t){t.stopPropagation();var e=$(this),a=e.closest("li"),i=a.attr("data-type"),o=a.attr("data-key");e.hasClass("fa-caret-right")?(e.removeClass("fa-caret-right").addClass("fa-caret-down"),$(get_search_options(i,o)).insertAfter(a)):(e.removeClass("fa-caret-down").addClass("fa-caret-right"),a.closest("ul").find('li.ts-option[data-type="'+i+'"][data-key="'+o+'"]').remove())}),$(document).on("click",filter_list.find("div i.fa-times-circle").selector,function(){$(this).closest("div").remove()}),$('[data-toggle="tooltip"]').tooltip(),$.notify&&($.notify.defaults({showAnimation:"fadeIn"}),$.notify.addStyle("crm",{html:"<div><span data-notify-text/></div>"})),$("a.mark-all-read").click(noti_mark_read),$(document).on("click","div.notifications li a",function(t){t.stopPropagation()}),$(document).on("click",'div.notifications li a[role="button"]',function(t){t.stopPropagation();var e=$(this);"true"==e.attr("aria-expanded")?e.attr("aria-expanded","false"):e.attr("aria-expanded","true"),$(this).parent().toggleClass("open")}),$("div.notifications.dropdown").on("show.bs.dropdown",function(t){$(this).find("> .dropdown-menu").stop(!0,!0).slideDown()}),$("div.notifications.dropdown").on("hide.bs.dropdown",function(t){t.preventDefault(),$(this).find("> .dropdown-menu").stop(!0,!0).slideUp(400,function(){$('div.notifications a[role="button"]').attr("aria-expanded","false"),$("div.notifications.dropdown, div.notifications div.dropdown").removeClass("open")})});var resize_set_height=[];$("span.input-group-addon").click(function(){$(this).prev('input[data-provide="datepicker"]').datepicker("show")});var crm_modal=init_modal();$(document).on("click",'div.edit-form div.dropdown ul.options-list li:not([data-action="create"], [data-action="create-edit"])',function(){var t=$(this).closest("div.dropdown").find("input.form-control");t.val($(this).text().trim()),$.each(this.attributes,function(){t.attr(this.nodeName,this.nodeValue)}),"tags"==$(this).closest("div.form-group").attr("data-type")&&$(this).addClass("hide"),$.each($._data(t[0],"events"),function(){-1!=this[0].type.indexOf("_crm")&&t.trigger(this[0].type)})}),$(document).on("click","ul.tagbox i.remove-icon-sprite",function(){var t=$(this).closest("li");t.closest("div.dropdown").find('.dropdown-menu li[data-id="'+t.attr("data-id")+'"]').removeClass("hide"),t.remove()}),$(window).resize(function(){main_nav.hasClass("active")&&($(window).width()<768&&(main_nav.removeClass("active"),push_pull("pull")),$("#crm-app > div.container-fluid > div.row").width($(window).width()-58),$("#crm-app > div.container-fluid").width($(window).width()-260)),$(window).width()>768&&top_search.removeAttr("style")});var task_opt="all",chk_tsk_grp=void 0;$(document).on("click","div.mail-messages ul.timelines span.done-mark",function(){var t=$(this).closest(".media");setTimeout(function(){t.removeClass("done-undone")},810);t.addClass("done-undone"),t.hasClass("done")?(t.removeClass("done").addClass("undone"),"complited"==task_opt&&t.fadeOut(300)):(t.removeClass("undone").addClass("done"),"incomplited"==task_opt&&t.fadeOut(300)),chk_tsk_grp=setTimeout(check_task_grp,310)}),$(document).on("click","div.mail-messages__options ul.dropdown-menu a[msg-option]",function(){task_opt=$(this).attr("msg-option"),-1==task_opt.indexOf("mark-all")&&($(this).closest("ul").find("li").removeClass("selected"),$(this).closest("li").addClass("selected")),check_task_grp("vis"),"incomplited"==task_opt?($("div.mail-messages ul.timelines .media.done:visible").fadeOut(300),$("div.mail-messages ul.timelines .media.undone:not(:visible)").fadeIn(300)):"complited"==task_opt?($("div.mail-messages ul.timelines .media.undone:visible").fadeOut(300),$("div.mail-messages ul.timelines .media.done:not(:visible)").fadeIn(300)):"all"==task_opt?$("div.mail-messages ul.timelines .media:not(:visible)").fadeIn(300):"mark-all-complited"==task_opt?$("div.mail-messages ul.timelines .media.undone span.done-mark").trigger("click"):"mark-all-incomplited"==task_opt&&$("div.mail-messages ul.timelines .media.done span.done-mark").trigger("click"),chk_tsk_grp=setTimeout(check_task_grp,310)});

/* main left nav plus icon click */
$(document).on('click', '#main-nav ul a i.fa', function() {
    $(this).closest('a').blur();
    alert('NEW');
    return false;
});

/* notification options */
$(document).on('click', 'div.notifications ul.noti-options li:not(.disabled) a', function(e) {
    var ths = $(this),
        action = ths.attr('data-action');

    if(action == 'mark-read') {     //
        noti_mark_read(ths);        // don't change this
    }								// put other options in elseif
});